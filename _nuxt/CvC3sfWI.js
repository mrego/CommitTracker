import{_ as Q}from"./CYeIyjzW.js";import{_ as W}from"./BCSySVuw.js";import{f as M,h as A,n as X,r as z,o as c,c as F,a as r,b as n,B as Y,s,i as T,w as a,d as l,t as u,x as C,F as H,j as I,T as ee,v as B,C as te,k as oe,l as ae,y as O,q as ne,p as R}from"./B29pliZ2.js";import{_ as G}from"./DlAUqK2U.js";import{_ as re}from"./CDkg2K4h.js";import"./B6qCbaoP.js";import"./DxPSARot.js";import"./D-2-6Lyj.js";import"./D2nGpDRe.js";import"./Bl_BFuLA.js";const se={key:0},le={key:0},ie=M({__name:"FuzzerHierarchy",props:{name:{type:String},authors:{type:Array},children:{type:Array},collapsed_default:{type:Boolean,default:!0}},setup(p){const k=p;let y=A(k.collapsed_default),h=X(()=>{if(!k.authors)return[];let d=new Map;for(let i of k.authors){const w=d.get(i)||0;d.set(i,w+1)}return Array.from(d).sort((i,w)=>w[1]-i[1]).map(i=>`${i[0]} (x${i[1]})`)});return(d,i)=>{const w=z("b-icon"),D=z("b-tag"),E=J;return c(),F("div",null,[r("div",{onClick:i[0]||(i[0]=m=>B(y)?y.value=!s(y):y=!s(y)),class:"clickable_area"},[p.children&&p.children.length?(c(),F("span",se,[n(w,{icon:"chevron-right",style:Y({transform:"rotate("+(s(y)?0:90)+"deg)",transition:"transform 0.2s"})},null,8,["style"])])):(c(),T(w,{key:1,icon:"empty"})),p.children.length?(c(),T(D,{key:2,type:"is-primary",style:{width:"4em","margin-right":"1em"}},{default:a(()=>[l(u(p.authors.length),1)]),_:1})):C("",!0),l(" "+u(p.name)+" ",1),n(ee,{name:"fade"},{default:a(()=>[s(h)&&s(h).length&&(s(y)||p.children.length==0)?(c(),F("span",le,[i[2]||(i[2]=r("span",{class:"m-3"},null,-1)),(c(!0),F(H,null,I(s(h).slice(0,5),m=>(c(),T(D,{type:"is-warning",class:"mr-1 mb-1"},{default:a(()=>[l(u(m),1)]),_:2},1024))),256)),s(h).length>5?(c(),T(D,{key:0,type:"is-warning",class:"mr-1 mb-1"},{default:a(()=>i[1]||(i[1]=[l("...")])),_:1})):C("",!0)])):C("",!0)]),_:1})]),n(te,{name:"fade"},{default:a(()=>[p.children&&!s(y)?(c(!0),F(H,{key:0},I(p.children,m=>(c(),T(E,{class:"recursive-list",key:m.name,name:m.name,authors:m.authors,children:m.children},null,8,["name","authors","children"]))),128)):C("",!0)]),_:1})])}}}),J=G(ie,[["__scopeId","data-v-b159b297"]]),ue={class:"section"},ce={class:"container"},de={class:"title"},he={class:"container"},me={class:"section"},_e={class:"container"},fe=["href"],pe=["href"],ye=["href"],be=["href"],we={class:"section"},ve={class:"container"},ge={class:"section"},ze={class:"container"},Te={class:"leaderboard-authors"},ke={key:0},xe={class:"section sticky bottom"},Fe=M({__name:"fuzz-test",setup(p){const k=oe(),y=ae(),h=A([new Date("2000-01-01"),new Date]);k.query.dates&&(h.value=k.query.dates.split(",").map(j=>new Date(j)));const d=A(["fuzzer_test","FUZZ_TEST"]);k.query.type&&(d.value=k.query.type.split(","));const i=O([]),w=O([]),D=O([]),E=A(0),m=O({name:"root",authors:[],children:[]}),N=()=>{const j={dates:h.value.map(o=>o.toISOString().split("T")[0]).join(","),type:d.value.join(",")};y.push({query:j})},P=async function(){var U;let o=await(await fetch("/fuzz-test/data.json")).json();o=o.filter(t=>{const e=new Date(t.date);return e>=h.value[0]&&e<=h.value[1]}),console.log(d.value),o=o.filter(t=>d.value.includes(t.type)),o.sort((t,e)=>new Date(e.date)-new Date(t.date)),o.forEach(t=>{t.date=new Date(t.date).toISOString().split("T")[0]}),o.forEach(t=>{t.author=t.author.split("@")[0]}),await new Promise(t=>setTimeout(t,1)),i.value=structuredClone(o),await new Promise(t=>setTimeout(t,1)),o.reverse();const S={};let v={};o.forEach(t=>{var e,b;v[e=t.type]||(v[e]=0),v[t.type]++,S[b=t.type]||(S[b]=[]),S[t.type].push({x:new Date(t.date),y:v[t.type]})}),D.value=Object.entries(S).map(([t,e])=>({label:t,extra_label:" = "+v[t],values:e})),E.value=Object.values(v).reduce((t,e)=>t+e,0);const V={};for(const t of o)V[U=t.author]||(V[U]=0),V[t.author]++;const x={};for(const[t,e]of Object.entries(V))x[e]||(x[e]=[]),x[e].push(t);const _=Object.entries(x).map(([t,e])=>({count:t,authors:e})).sort((t,e)=>e.count-t.count),f=(t,e)=>{_[t]&&(_[t].icon=e)};f(0,"ðŸ¥‡"),f(1,"ðŸ¥ˆ"),f(2,"ðŸ¥‰"),await new Promise(t=>setTimeout(t,1)),w.value=_,await new Promise(t=>setTimeout(t,1));const g={name:"root",authors:[],children:[]};for(const t of o){let e=g;const b=t.file.split("/");b.push("   "+t.suite_name),e.authors.push(t.author);for(const L of b){let $=e.children.find(K=>K.name==L);$||($={name:L,children:[],authors:[]},e.children.push($)),e=$,e.authors.push(t.author)}}console.log(g);const q=t=>{for(const e of t.children)q(e);if(t.children.length==1&&t.children[0].children.length){const e=t.children[0];t.name+="/"+e.name,t.children=e.children,t.authors=e.authors}};q(g);const Z=t=>{t.children.sort((e,b)=>e.name.localeCompare(b.name));for(const e of t.children)Z(e)};Z(g),m.value=g};return ne(()=>{N(),P()}),R(h,()=>{N(),P()}),R(d,()=>{N(),P()}),(j,o)=>{const S=Q,v=z("b-icon"),V=W,x=z("b-checkbox-button"),_=z("b-field"),f=z("b-table-column"),g=z("router-link"),q=z("b-tag"),Z=z("b-table"),U=J,t=re;return c(),F("div",null,[n(S),r("section",ue,[r("div",ce,[r("h1",de,[n(v,{icon:"strike"}),l(u(s(E))+" fuzzers in chromium",1)]),n(V,{data:s(D)},null,8,["data"]),r("div",he,[n(_,null,{default:a(()=>[n(x,{modelValue:s(d),"onUpdate:modelValue":o[0]||(o[0]=e=>B(d)?d.value=e:null),"native-value":"fuzzer_test"},{default:a(()=>o[3]||(o[3]=[l("Fuzz target")])),_:1},8,["modelValue"]),n(x,{modelValue:s(d),"onUpdate:modelValue":o[1]||(o[1]=e=>B(d)?d.value=e:null),"native-value":"FUZZ_TEST"},{default:a(()=>o[4]||(o[4]=[l("FUZZ_TEST")])),_:1},8,["modelValue"])]),_:1})])])]),r("section",me,[r("div",_e,[o[7]||(o[7]=r("h2",{class:"title"},"Fuzzers",-1)),n(Z,{data:s(i),hoverable:"",paginated:!0,"pagination-simple":!0,"pagination-position":"top","pagination-rounded":!0,"per-page":15,striped:"",detailed:""},{detail:a(e=>[n(_,{label:"Date",horizontal:""},{default:a(()=>[l(u(e.row.date),1)]),_:2},1024),n(_,{label:"Author",horizontal:""},{default:a(()=>[n(g,{to:{name:"individuals",query:{developers:e.row.author,repositories:"chromium"}}},{default:a(()=>[l(u(e.row.author),1)]),_:2},1032,["to"])]),_:2},1024),n(_,{label:"File",horizontal:""},{default:a(()=>[r("a",{href:"https://cs.chromium.org/chromium/src/"+e.row.file+"?l="+e.row.line},u(e.row.file),9,ye)]),_:2},1024),n(_,{label:"Line",horizontal:""},{default:a(()=>[l(u(e.row.line),1)]),_:2},1024),n(_,{label:"Type",horizontal:""},{default:a(()=>[l(u(e.row.type),1)]),_:2},1024),n(_,{label:"Sha",horizontal:""},{default:a(()=>[r("a",{href:"https://chromium-review.googlesource.com/q/"+e.row.sha},u(e.row.sha),9,be)]),_:2},1024)]),default:a(()=>[n(f,{field:"date",label:"Date",sortable:""},{default:a(e=>[l(u(e.row.date),1)]),_:1}),n(f,{field:"author",label:"Author",sortable:""},{default:a(e=>[n(g,{to:{name:"individuals",query:{developers:e.row.author,repositories:"chromium"}}},{default:a(()=>[l(u(e.row.author),1)]),_:2},1032,["to"])]),_:1}),n(f,{field:"suite_name",label:"Name",sortable:""},{default:a(e=>[r("a",{href:"https://cs.chromium.org/chromium/src/"+e.row.file+"?l="+e.row.line},u(e.row.suite_name),9,fe)]),_:1}),n(f,{field:"sha",label:"Patch"},{default:a(e=>[r("a",{href:"https://chromium-review.googlesource.com/q/"+e.row.sha}," Open ",8,pe)]),_:1}),n(f,{field:"type",label:"Type",sortable:""},{default:a(e=>[e.row.type=="fuzzer_test"?(c(),T(q,{key:0,type:"is-info"},{default:a(()=>o[5]||(o[5]=[l(" fuzz target ")])),_:1})):e.row.type=="FUZZ_TEST"?(c(),T(q,{key:1,type:"is-danger"},{default:a(()=>o[6]||(o[6]=[l(" FUZZ_TEST ")])),_:1})):(c(),T(q,{key:2,type:"is-danger"},{default:a(()=>[l(u(e.row.type),1)]),_:2},1024))]),_:1})]),_:1},8,["data"])])]),r("section",we,[r("div",ve,[o[8]||(o[8]=r("h2",{class:"title"},"Hierarchy",-1)),n(U,{name:s(m).name,children:s(m).children,authors:s(m).authors,collapsed_default:!1},null,8,["name","children","authors"])])]),r("section",ge,[r("div",ze,[o[10]||(o[10]=r("h2",{class:"title"},"Leaderboard",-1)),n(Z,{data:s(w),hoverable:"",striped:""},{default:a(()=>[n(f,{field:"count",label:"Fuzzers"},{default:a(e=>[l(u(e.row.count),1)]),_:1}),n(f,{field:"author",label:"Authors"},{default:a(e=>[r("div",Te,[(c(!0),F(H,null,I(e.row.authors,b=>(c(),T(g,{class:"leaderboard-author",to:{name:"individuals",query:{developers:b,repositories:"chromium"}}},{default:a(()=>[e.row.icon?(c(),F("span",ke,u(e.row.icon),1)):C("",!0),l(" "+u(b),1)]),_:2},1032,["to"]))),256)),o[9]||(o[9]=r("div",{class:"flex-end"},null,-1))])]),_:1})]),_:1},8,["data"])])]),r("section",xe,[n(_,{expanded:""},{default:a(()=>[n(t,{modelValue:s(h),"onUpdate:modelValue":o[2]||(o[2]=e=>B(h)?h.value=e:null)},null,8,["modelValue"])]),_:1})])])}}}),Oe=G(Fe,[["__scopeId","data-v-6f15b2a3"]]);export{Oe as default};
