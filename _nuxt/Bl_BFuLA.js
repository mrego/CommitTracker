function w(e){let t;for(;t=e.sourceEvent;)e=t;return e}function q(e,t){if(e=w(e),t===void 0&&(t=e.currentTarget),t){var h=t.ownerSVGElement||t;if(h.createSVGPoint){var i=h.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const M=Math.PI,x=2*M,u=1e-6,L=x-u;function C(e){this._+=e[0];for(let t=1,h=e.length;t<h;++t)this._+=arguments[t]+e[t]}function S(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return C;const h=10**t;return function(i){this._+=i[0];for(let s=1,n=i.length;s<n;++s)this._+=Math.round(arguments[s]*h)/h+i[s]}}class P{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?C:S(t)}moveTo(t,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,h){this._append`L${this._x1=+t},${this._y1=+h}`}quadraticCurveTo(t,h,i,s){this._append`Q${+t},${+h},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,h,i,s,n,$){this._append`C${+t},${+h},${+i},${+s},${this._x1=+n},${this._y1=+$}`}arcTo(t,h,i,s,n){if(t=+t,h=+h,i=+i,s=+s,n=+n,n<0)throw new Error(`negative radius: ${n}`);let $=this._x1,o=this._y1,p=i-t,l=s-h,a=$-t,r=o-h,_=a*a+r*r;if(this._x1===null)this._append`M${this._x1=t},${this._y1=h}`;else if(_>u)if(!(Math.abs(r*p-l*a)>u)||!n)this._append`L${this._x1=t},${this._y1=h}`;else{let f=i-$,c=s-o,y=p*p+l*l,b=f*f+c*c,g=Math.sqrt(y),T=Math.sqrt(_),E=n*Math.tan((M-Math.acos((y+_-b)/(2*g*T)))/2),d=E/T,m=E/g;Math.abs(d-1)>u&&this._append`L${t+d*a},${h+d*r}`,this._append`A${n},${n},0,0,${+(r*f>a*c)},${this._x1=t+m*p},${this._y1=h+m*l}`}}arc(t,h,i,s,n,$){if(t=+t,h=+h,i=+i,$=!!$,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(s),p=i*Math.sin(s),l=t+o,a=h+p,r=1^$,_=$?s-n:n-s;this._x1===null?this._append`M${l},${a}`:(Math.abs(this._x1-l)>u||Math.abs(this._y1-a)>u)&&this._append`L${l},${a}`,i&&(_<0&&(_=_%x+x),_>L?this._append`A${i},${i},0,1,${r},${t-o},${h-p}A${i},${i},0,1,${r},${this._x1=l},${this._y1=a}`:_>u&&this._append`A${i},${i},0,${+(_>=M)},${r},${this._x1=t+i*Math.cos(n)},${this._y1=h+i*Math.sin(n)}`)}rect(t,h,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}}function A(){return new P}A.prototype=P.prototype;export{P,A as a,q as p};
