import{r as c}from"./CTRyl4Lp.js";import{f as A,m as I,g as L,h as v,r as x,o as u,c as V,a as f,F as C,j as F,s as n,i as w,w as y,d as g,t as N,x as k,v as M}from"./B29pliZ2.js";import{_ as S}from"./DlAUqK2U.js";const U={class:"columns"},R={class:"fields column"},$={class:"column is-narrow"},h=A({__name:"RepositorySelector",props:I({filter:{type:Function,required:!1,default:()=>!0},allowMultiple:{type:Boolean,required:!1,default:!1},allowAll:{type:Boolean,required:!1,default:!1},size:{type:String,default:"is-small",required:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const t=L(a,"modelValue"),B=a,r=v(c),p=v(c.map(l=>l.dirname)),i=v(t.value.length>1),o=v(t.value.length==p.value.filter(l=>{for(const e of c)if(e.dirname.toLowerCase()===l)return e.parent==null;return!1}).length),_=async()=>{if(o.value=!o.value,!o.value){t.value=[];return}i.value=B.allowMultiple.value;const l=p.value.map(e=>e.toLowerCase()).filter(e=>{for(const s of r.value)if(s.dirname.toLowerCase()===e)return s.parent==null;return!1});t.value=l};function q(l){if(o.value=!1,!i.value){t.value=[l];return}const e=[...t.value],s=e.indexOf(l);s===-1?e.push(l):e.splice(s,1),t.value=e.sort()}return(l,e)=>{const s=x("b-checkbox-button"),b=x("b-checkbox");return u(),V("div",U,[f("div",R,[(u(!0),V(C,null,F(n(p),(d,m)=>(u(),V(C,{key:m},[a.filter(n(r)[m])?(u(),w(s,{key:0,style:{"margin-right":"-0.02rem","margin-left":"0"},name:"repositories",size:a.size,modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=z=>t.value=z),"native-value":n(r)[m].dirname,onInput:z=>q(n(r)[m].dirname)},{default:y(()=>[g(N(n(r)[m].name),1)]),_:2},1032,["size","modelValue","native-value","onInput"])):k("",!0)],64))),128)),e[4]||(e[4]=f("div",{class:"spacer"},null,-1))]),f("div",$,[f("div",null,[a.allowAll?(u(),w(b,{key:0,size:a.size,name:"all",type:"is-warning",modelValue:n(o),"onUpdate:modelValue":e[1]||(e[1]=d=>M(o)?o.value=d:null),onInput:e[2]||(e[2]=d=>_())},{default:y(()=>e[5]||(e[5]=[g(" All ")])),_:1},8,["size","modelValue"])):k("",!0)]),f("div",null,[a.allowMultiple?(u(),w(b,{key:0,size:a.size,name:"multiple",modelValue:n(i),"onUpdate:modelValue":e[3]||(e[3]=d=>M(i)?i.value=d:null)},{default:y(()=>e[6]||(e[6]=[g(" Multiple ")])),_:1},8,["size","modelValue"])):k("",!0)])])])}}}),O=S(h,[["__scopeId","data-v-d213e237"]]);export{O as _};
