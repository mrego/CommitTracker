import{_ as Y}from"./CYeIyjzW.js";import{_ as W}from"./NxUEi_18.js";import{_ as G}from"./DBfvudyj.js";import{a as O,_ as J,b as K}from"./Cqg7ugOz.js";import{f as j,G as Q,y as S,h as B,p as D,r as U,o as R,c as F,b as l,w as r,s as o,v as x,d as M,a as u,k as X,l as Z,n as ee,i as te,x as oe}from"./B29pliZ2.js";import{f as H}from"./D2nGpDRe.js";import{_ as se}from"./CDkg2K4h.js";import{_ as le}from"./DlAUqK2U.js";import"./CTRyl4Lp.js";import"./B6qCbaoP.js";import"./BCSySVuw.js";import"./DxPSARot.js";import"./D-2-6Lyj.js";import"./Bl_BFuLA.js";const ne={align:"center"},ae=j({__name:"TimelineCount",props:{repositories:{type:Array[String],default:()=>["chromium"]},developers:{type:Array},dates:{type:Array[Date]},author:{type:Boolean},review:{type:Boolean}},setup(z){const{$chromiumDataAll:_}=Q(),f=z,v=S([]),m=S([]),s=S([]),h=B(!1),b=async()=>{const T=[];for(const y of v.value){let n=y.commits.filter(t=>{const d=new Date(t.date);return d>=f.dates[0]&&d<=f.dates[1]});f.author||(n=n.filter(t=>t.kind!="author")),f.review||(n=n.filter(t=>t.kind!="review"));const e=[];e.push({field:"developer",label:"Developer",sortable:!0,sticky:!0,visible:!0,numeric:!1,headerClass:"table-style-header"}),e.push({field:"commit",label:"Σ(Commits)",sortable:!0,visible:!0,numeric:!0,cellClass:"table-style-commits",headerClass:"table-style-header"});const w=[];w.push(["",t=>`Σ(${t})`]),h.value&&(w.push(["_mean",t=>`Mean(${t})`]),w.push(["_median",t=>`Median(${t})`]),w.push(["_min",t=>`Min(${t})`]),w.push(["_max",t=>`Max(${t})`]));for(const t of["Additions","Deletions","Net","Modified","Files"])for(const d of w){const N=`${t.toLowerCase()}${d[0]}`;e.push({field:N,label:d[1](t),sortable:!0,visible:!0,numeric:!0,cellClass:`table-style-${t.toLowerCase()}`,headerClass:"table-style-header"})}s.value=e;const k=n.map(t=>t.additions).sort((t,d)=>t-d),g=n.map(t=>t.deletions).sort((t,d)=>t-d),c=n.map(t=>t.additions-t.deletions).sort((t,d)=>t-d),V=n.map(t=>t.additions+t.deletions).sort((t,d)=>t-d),C=n.map(t=>t.files).sort((t,d)=>t-d),a=H(",d"),$=H(".2f"),q=t=>t.reduce((d,N)=>d+N,0),P=q(k),A=q(g),E=q(c),i=q(V),I=q(C),L={developer:y.developer,commit:H(",")(n.length),additions:a(P),additions_mean:$(P/n.length),additions_median:a(k[Math.floor(k.length/2)]),additions_min:a(k[0]),additions_max:a(k[k.length-1]),deletions:a(A),deletions_mean:$(A/n.length),deletions_median:a(g[Math.floor(g.length/2)]),deletions_min:a(g[0]),deletions_max:a(g[g.length-1]),net:a(E),net_mean:$(E/n.length),net_median:a(c[Math.floor(c.length/2)]),net_min:a(c[0]),net_max:a(c[c.length-1]),modified:a(i),modified_mean:$(i/n.length),modified_median:a(V[Math.floor(V.length/2)]),modified_min:a(V[0]),modified_max:a(V[V.length-1]),files:a(I),files_mean:$(I/n.length),files_median:a(C[Math.floor(C.length/2)]),files_min:a(C[0]),files_max:a(C[C.length-1])};T.push(L)}m.value=T},p=async()=>{const T=await _(f.repositories[0],f.developers);v.value=T.map(y=>({developer:y.developer,commits:y.data})),b()};return p(),D(()=>f.repositories,p),D(()=>f.developers,p),D(()=>f.dates,p),D(()=>f.author,b),D(()=>f.review,b),D(h,b),(T,y)=>{const n=U("b-switch"),e=U("b-field"),w=U("b-table");return R(),F("div",null,[l(e,null,{default:r(()=>[l(n,{modelValue:o(h),"onUpdate:modelValue":y[0]||(y[0]=k=>x(h)?h.value=k:null)},{default:r(()=>y[1]||(y[1]=[M("Full")])),_:1},8,["modelValue"])]),_:1}),u("div",ne,[l(w,{data:o(m),columns:o(s),"sticky-header":"",striped:"",hoverable:""},null,8,["data","columns"])])])}}}),ie={class:"section sticky top"},de={class:"section"},re={class:"container"},ue={class:"section"},me={class:"container"},pe={class:"section"},ce={class:"container"},_e={class:"section"},fe={class:"container"},ve={class:"section sticky bottom"},he=j({__name:"individuals",setup(z){const _=X(),f=Z(),v=B([new Date("2000-01-01"),new Date]);_.query.dates&&(v.value=_.query.dates.split(",").map(n=>new Date(n)));const m=B([]);_.query.developers&&(m.value=_.query.developers.split(",")),ee(()=>m.value);const s=B(["author","review"]);_.query.options&&(s.value=_.query.options.split(","));const h=B(0);_.query.hourlyParam&&(h.value=parseInt(_.query.hourlyParam));const b=B(100);_.query.wrappedBuckets&&(b.value=parseInt(_.query.wrappedBuckets));const p=B(["chromium"]);_.query.repositories&&(p.value=_.query.repositories.split(",")),D([v,m,s,h,b,p],()=>{f.push({query:{developers:m.value.join(","),options:s.value.join(","),hourlyParam:h.value,wrappedBuckets:b.value,repositories:p.value.join(","),dates:v.value.map(n=>n.toISOString().split("T")[0]).join(",")}})});const y=()=>{const n=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);document.documentElement.dataset.scrolltop=window.scrollY>100?"1":"0",document.documentElement.dataset.scrollbottom=n-window.scrollY>1e3?"1":"0"};return y(),document.addEventListener("scroll",y,{passive:!0}),(n,e)=>{const w=Y,k=W,g=G,c=U("b-field"),V=U("b-checkbox-button"),C=O,a=U("b-slider-tick"),$=U("b-slider"),q=J,P=K,A=ae,E=se;return R(),F("div",null,[l(w),u("div",null,[u("section",ie,[l(k,{modelValue:o(p),"onUpdate:modelValue":e[0]||(e[0]=i=>x(p)?p.value=i:null),size:"is-small"},null,8,["modelValue"]),l(c,{grouped:""},{default:r(()=>[l(c,{expanded:""},{default:r(()=>[l(g,{modelValue:o(m),"onUpdate:modelValue":e[1]||(e[1]=i=>x(m)?m.value=i:null)},null,8,["modelValue"])]),_:1}),l(c,null,{default:r(()=>[l(V,{modelValue:o(s),"onUpdate:modelValue":e[2]||(e[2]=i=>x(s)?s.value=i:null),"native-value":"author",size:"is-medium"},{default:r(()=>e[8]||(e[8]=[M(" Author ")])),_:1},8,["modelValue"]),l(V,{modelValue:o(s),"onUpdate:modelValue":e[3]||(e[3]=i=>x(s)?s.value=i:null),"native-value":"review",size:"is-medium"},{default:r(()=>e[9]||(e[9]=[M(" Review ")])),_:1},8,["modelValue"])]),_:1}),l(c,null,{default:r(()=>[o(m).length>=2?(R(),te(V,{key:0,modelValue:o(s),"onUpdate:modelValue":e[4]||(e[4]=i=>x(s)?s.value=i:null),"native-value":"stacked",size:"is-medium"},{default:r(()=>e[10]||(e[10]=[M(" Stacked ")])),_:1},8,["modelValue"])):oe("",!0)]),_:1})]),_:1})]),u("section",de,[u("div",re,[e[11]||(e[11]=u("h2",{class:"title"},"1. Timeline",-1)),l(C,{repositories:o(p),developers:o(m),dates:o(v),author:o(s).includes("author"),review:o(s).includes("review"),stacked:o(s).includes("stacked")},null,8,["repositories","developers","dates","author","review","stacked"])])]),u("section",ue,[u("div",me,[e[15]||(e[15]=u("h2",{class:"title"},"2. Timeline wrapped",-1)),l(c,{grouped:""},{default:r(()=>[l(c,{label:"Modulo",expanded:"","label-position":"on-border"},{default:r(()=>[l($,{modelValue:o(h),"onUpdate:modelValue":e[5]||(e[5]=i=>x(h)?h.value=i:null),min:0,max:2,"aria-label":"Fan",tooltip:!1,rounded:""},{default:r(()=>[l(a,{value:0},{default:r(()=>e[12]||(e[12]=[M("Day")])),_:1}),l(a,{value:1},{default:r(()=>e[13]||(e[13]=[M("Week")])),_:1}),l(a,{value:2},{default:r(()=>e[14]||(e[14]=[M("Year")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"Buckets: "+o(b),expanded:"","label-position":"on-border"},{default:r(()=>[l($,{modelValue:o(b),"onUpdate:modelValue":e[6]||(e[6]=i=>x(b)?b.value=i:null),min:1,max:500,"aria-label":"Buckets",lazy:"",rounded:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(q,{repositories:o(p),developers:o(m),dates:o(v),author:o(s).includes("author"),review:o(s).includes("review"),stacked:o(s).includes("stacked"),hourlyParam:o(h),buckets:o(b)},null,8,["repositories","developers","dates","author","review","stacked","hourlyParam","buckets"])])]),u("section",pe,[u("div",ce,[e[16]||(e[16]=u("h2",{class:"title"},"3. Peers",-1)),l(P,{repositories:o(p),developers:o(m),dates:o(v),author:o(s).includes("author"),review:o(s).includes("review"),stacked:o(s).includes("stacked")},null,8,["repositories","developers","dates","author","review","stacked"])])]),u("section",_e,[u("div",fe,[e[17]||(e[17]=u("h2",{class:"title"},"4. Counts",-1)),l(A,{repositories:o(p),developers:o(m),dates:o(v),author:o(s).includes("author"),review:o(s).includes("review")},null,8,["repositories","developers","dates","author","review"])])]),u("section",ve,[l(c,{expanded:""},{default:r(()=>[l(E,{modelValue:o(v),"onUpdate:modelValue":e[7]||(e[7]=i=>x(v)?v.value=i:null)},null,8,["modelValue"])]),_:1})])])])}}}),Te=le(he,[["__scopeId","data-v-201c6fe9"]]);export{Te as default};
